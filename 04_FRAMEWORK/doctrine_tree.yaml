# doctrine_tree.yaml
# Hegemon Domain Taxonomy and Grounding Index
# Version: 1.0
# Authority: Architect Command Manifest v2.5
# Maintained by: AST-GOV

version: "1.0"
last_updated: "2026-02-20"
maintained_by: "AST-GOV"

# ─────────────────────────────────────────────────────────────────────────────
# DOMAIN DEFINITIONS
# owner:           sim_id responsible for this domain
# keywords:        used by Router (Workflow 06) for intent classification
# grounding_docs:  corpus paths Juror requires cited in proposals
# juror_threshold: minimum grounding_tokens to pass Juror (0 = exempt)
# vote_required:   Council vote mandatory for this domain
# vera_clearance:  Vera economic clearance required
# ─────────────────────────────────────────────────────────────────────────────

domains:

  GOVERNANCE:
    owner: "RXY-CEO"
    description: "Doctrine amendments, charter changes, protocol updates, compliance"
    keywords:
      - doctrine
      - charter
      - protocol
      - policy
      - approve
      - reject
      - vote
      - ledger
      - audit
      - compliance
      - amendment
      - change proposal
      - CP-
      - governance
      - separation of powers
    grounding_docs:
      - "01_COUNCIL/COUNCIL_CHARTER.md"
      - "01_COUNCIL/COUNCIL_PROTOCOLS.md"
      - "00_ARCHITECT/CHANGE_CONTROL_PROTOCOL.md"
      - "00_ARCHITECT/SEPARATION_OF_POWERS.md"
    juror_threshold: 200
    vote_required: true
    vera_clearance: false

  BUILD:
    owner: "BRM-CTO"
    description: "Agent creation, workflow building, integration, code, deployment"
    keywords:
      - build
      - create
      - deploy
      - workflow
      - integrate
      - automate
      - code
      - script
      - setup
      - install
      - docker
      - container
      - new agent
      - n8n
      - pipeline
    grounding_docs:
      - "04_FRAMEWORK/agent_schema.yaml"
      - "05_SECURITY/ACCESS_MATRIX.md"
      - "05_SECURITY/POLICY_MANIFEST.yaml"
      - "05_SECURITY/SAFE_DEPLOY_GUIDE.md"
    juror_threshold: 150
    vote_required: true
    vera_clearance: true

  RESEARCH:
    owner: "SRN-CIO"
    description: "Market analysis, competitor research, data gathering, investigation"
    keywords:
      - analyze
      - research
      - investigate
      - evaluate
      - report
      - assess
      - compare
      - summarize
      - market
      - competitor
      - data
      - findings
    grounding_docs:
      - "07_LEDGER_RULES/profit_equilibrium_formula.md"
    juror_threshold: 100
    vote_required: false
    vera_clearance: true

  STRATEGY:
    owner: "SRN-CIO"
    description: "Business planning, ROI analysis, venture design, optimization"
    keywords:
      - plan
      - strategy
      - optimize
      - ROI
      - revenue
      - venture
      - profit
      - risk
      - forecast
      - business model
      - funnel
      - monetize
      - roadmap
      - launch
    grounding_docs:
      - "07_LEDGER_RULES/profit_equilibrium_formula.md"
      - "04_FRAMEWORK/doctrine_tree.yaml"
    juror_threshold: 150
    vote_required: true
    vera_clearance: true

  COMMS:
    owner: "RXY-CEO"
    description: "Notifications, messages, emails, alerts, announcements"
    keywords:
      - send
      - message
      - notify
      - email
      - alert
      - announce
      - contact
      - reply
      - telegram
      - discord
      - broadcast
    grounding_docs: []
    juror_threshold: 0
    vote_required: false
    vera_clearance: true

  SECURITY:
    owner: "BRM-CTO"
    description: "Access control, key rotation, injection threats, policy enforcement"
    keywords:
      - security
      - access
      - key
      - rotate
      - block
      - injection
      - threat
      - credentials
      - firewall
      - lockdown
      - breach
      - vulnerability
    grounding_docs:
      - "05_SECURITY/SAFE_DEPLOY_GUIDE.md"
      - "05_SECURITY/ACCESS_MATRIX.md"
      - "05_SECURITY/POLICY_MANIFEST.yaml"
    juror_threshold: 200
    vote_required: true
    vera_clearance: false

  ECONOMIC:
    owner: "VRA-CFO"
    description: "Budget management, token economics, ROI scoring, financial red flags"
    keywords:
      - budget
      - spend
      - token
      - cost
      - limit
      - clearance
      - economic
      - ROI
      - financial
      - red flag
      - model tier
    grounding_docs:
      - "07_LEDGER_RULES/profit_equilibrium_formula.md"
    juror_threshold: 100
    vote_required: false
    vera_clearance: false

  SYSTEM:
    owner: "RXY-CEO"
    description: "Health checks, monitoring, sync, backup, restart, status"
    keywords:
      - status
      - health
      - monitor
      - sync
      - backup
      - restart
      - check
      - log
      - watchdog
      - uptime
      - ping
    grounding_docs: []
    juror_threshold: 0
    vote_required: false
    vera_clearance: false

  CORPUS:
    owner: "AST-GOV"
    description: "Corpus audits, gap identification, change proposals, doctrine validation"
    keywords:
      - corpus
      - audit
      - gap
      - placeholder
      - change proposal
      - CP-
      - validate
      - consistency
      - broken reference
    grounding_docs:
      - "00_ARCHITECT/CHANGE_CONTROL_PROTOCOL.md"
      - "04_FRAMEWORK/agent_schema.yaml"
    juror_threshold: 100
    vote_required: false
    vera_clearance: false

  UNKNOWN:
    owner: "RXY-CEO"
    description: "Unclassified — escalates to Roxy for decomposition or Architect"
    keywords: []
    grounding_docs: []
    juror_threshold: 0
    vote_required: false
    vera_clearance: false

# ─────────────────────────────────────────────────────────────────────────────
# GROUNDING SOURCES INDEX
# Canonical corpus paths. Juror validates all citations against this list.
# ─────────────────────────────────────────────────────────────────────────────

grounding_sources_index:

  - id: "COUNCIL_CHARTER"
    path: "01_COUNCIL/COUNCIL_CHARTER.md"
    type: "governance"

  - id: "COUNCIL_PROTOCOLS"
    path: "01_COUNCIL/COUNCIL_PROTOCOLS.md"
    type: "governance"

  - id: "ARCHITECT_MANIFEST"
    path: "00_ARCHITECT/README.md"
    type: "governance"

  - id: "CHANGE_CONTROL"
    path: "00_ARCHITECT/CHANGE_CONTROL_PROTOCOL.md"
    type: "governance"

  - id: "SEPARATION_OF_POWERS"
    path: "00_ARCHITECT/SEPARATION_OF_POWERS.md"
    type: "governance"

  - id: "AGENT_SCHEMA"
    path: "04_FRAMEWORK/agent_schema.yaml"
    type: "framework"

  - id: "DOCTRINE_TREE"
    path: "04_FRAMEWORK/doctrine_tree.yaml"
    type: "framework"

  - id: "ORCHESTRATOR_SPEC"
    path: "04_FRAMEWORK/orchestrator_spec.md"
    type: "framework"

  - id: "JUROR_RULES"
    path: "04_FRAMEWORK/Juror_Rules.yaml"
    type: "framework"

  - id: "DOMAIN_REGISTRY"
    path: "04_FRAMEWORK/Domain_Registry.yaml"
    type: "framework"

  - id: "INTENT_TAXONOMY"
    path: "04_FRAMEWORK/Intent_Taxonomy.yaml"
    type: "framework"

  - id: "ACCESS_MATRIX"
    path: "05_SECURITY/ACCESS_MATRIX.md"
    type: "security"

  - id: "POLICY_MANIFEST"
    path: "05_SECURITY/POLICY_MANIFEST.yaml"
    type: "security"

  - id: "SAFE_DEPLOY"
    path: "05_SECURITY/SAFE_DEPLOY_GUIDE.md"
    type: "security"

  - id: "PROFIT_EQUILIBRIUM"
    path: "07_LEDGER_RULES/profit_equilibrium_formula.md"
    type: "economic"

  - id: "AUDIT_LEDGER_SPEC"
    path: "07_LEDGER_RULES/audit_ledger_spec.md"
    type: "ledger"

  - id: "COUNCIL_DECISION_TEMPLATE"
    path: "07_LEDGER_RULES/council_decision_template.md"
    type: "ledger"

# ─────────────────────────────────────────────────────────────────────────────
# MULTI-DOMAIN ROUTING RULES
# When a task matches keywords across multiple domains.
# ─────────────────────────────────────────────────────────────────────────────

multi_domain_rules:

  - domains: [STRATEGY, BUILD]
    action: decompose
    note: "Sorin analyzes first; Brom executes only after Council approval"

  - domains: [RESEARCH, STRATEGY]
    action: merge
    owner: "SRN-CIO"
    note: "Sorin handles both in a single unified proposal"

  - domains: [BUILD, SECURITY]
    action: sequential
    order: [SECURITY, BUILD]
    note: "Security review must precede build execution"

  - domains: [GOVERNANCE, any]
    action: governance_first
    note: "Astra validation required before any other domain proceeds"

  - domains: [ECONOMIC, any]
    action: clearance_first
    note: "Vera clearance required before vera_clearance:true domains proceed"
